{% extends 'base.html' %}
{% load static %}

{% block title %}Registrar Diagnóstico{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/public/dashboard_shared.css' %}">
    <style>
        .diagnostico-container { max-width: 700px; margin: 2rem auto; display: relative; z-index:5 }
        .consulta-info { background-color: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #eee; }
        .diagnostico-container form { display: flex; flex-direction: column; gap: 1rem; }
        .diagnostico-container .form-group label { font-weight: bold; margin-bottom: 0.5rem; display: block; }
        .diagnostico-container input[type="text"],
        .diagnostico-container textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 1rem;
            box-sizing: border-box;
        }
        .btn-submit { padding: 0.8rem 1.5rem; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; transition: background-color 0.2s ease; margin-top: 1rem; }
        .btn-submit:hover { background-color: #218838; }
    </style>
{% endblock %}

{% block content %}
<div class="dashboard-container diagnostico-container card">
    <div class="dashboard-header">
        <h1>Registrar Diagnóstico</h1>
    </div>

    <div class="consulta-info">
        <strong>Consulta de:</strong> {{ consulta.paciente.usuario.nome }}<br>
        <strong>Data:</strong> {{ consulta.data|date:"d/m/Y" }} às {{ consulta.hora|time:"H:i" }}
    </div>

    <form method="POST">
        {% csrf_token %}
        <div class="form-group">
            {{ form.descricao.label_tag }}
            {{ form.descricao }}
            {% if form.descricao.errors %}<div class="form-errors">{{ form.descricao.errors|striptags }}</div>{% endif %}
        </div>
        <div class="form-group">
            {{ form.cid10.label_tag }}
            {{ form.cid10 }}
            {% if form.cid10.errors %}<div class="form-errors">{{ form.cid10.errors|striptags }}</div>{% endif %}
        </div>

        <button type="submit" class="btn-submit">Salvar Diagnóstico</button>
    </form>
</div>
{% endblock %}